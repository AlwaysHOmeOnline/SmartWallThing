<mxfile host="app.diagrams.net" modified="2024-05-20T14:36:35.916Z" agent="Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/125.0.0.0 Safari/537.36 Edg/125.0.0.0" etag="91oDpzTmHQ4JXE7dDuZI" version="24.4.4" type="github" pages="2">
  <diagram name="Architecture" id="3tNNM1X5z_LQ3v7Zmcsf">
    <mxGraphModel dx="1160" dy="702" grid="0" gridSize="10" guides="1" tooltips="1" connect="1" arrows="1" fold="1" page="1" pageScale="1" pageWidth="850" pageHeight="1100" background="#000000" math="0" shadow="0">
      <root>
        <mxCell id="0" />
        <mxCell id="1" parent="0" />
        <UserObject label="&lt;b&gt;Output Module&lt;/b&gt;" link="data:page/id,Wxlf60OAAQlv3tUu_XnG" id="fAy4cRbwCINLskFZb-au-1">
          <mxCell style="rounded=1;whiteSpace=wrap;html=1;" vertex="1" parent="1">
            <mxGeometry x="293" y="946" width="172" height="60" as="geometry" />
          </mxCell>
        </UserObject>
        <mxCell id="fAy4cRbwCINLskFZb-au-18" value="&lt;b&gt;1 Output Module&lt;/b&gt;" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#0050ef;fontColor=#ffffff;strokeColor=#001DBC;" vertex="1" parent="1">
          <mxGeometry x="415" y="986" width="100.33" height="35" as="geometry" />
        </mxCell>
        <mxCell id="fAy4cRbwCINLskFZb-au-11" value="&lt;b&gt;2 Output Module&lt;/b&gt;" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#0050ef;fontColor=#ffffff;strokeColor=#001DBC;" vertex="1" parent="1">
          <mxGeometry x="428" y="998" width="100.33" height="35" as="geometry" />
        </mxCell>
        <mxCell id="fAy4cRbwCINLskFZb-au-12" value="&lt;b&gt;3 Output Module&lt;/b&gt;" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#0050ef;fontColor=#ffffff;strokeColor=#001DBC;" vertex="1" parent="1">
          <mxGeometry x="441" y="1009" width="100.33" height="35" as="geometry" />
        </mxCell>
        <mxCell id="fAy4cRbwCINLskFZb-au-13" value="&lt;b&gt;4 Output Module&lt;/b&gt;" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#0050ef;fontColor=#ffffff;strokeColor=#001DBC;" vertex="1" parent="1">
          <mxGeometry x="451" y="1019" width="100.33" height="35" as="geometry" />
        </mxCell>
        <mxCell id="fAy4cRbwCINLskFZb-au-14" value="&lt;b&gt;5 Output Module&lt;/b&gt;" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#0050ef;fontColor=#ffffff;strokeColor=#001DBC;" vertex="1" parent="1">
          <mxGeometry x="461" y="1029" width="100.33" height="35" as="geometry" />
        </mxCell>
        <mxCell id="fAy4cRbwCINLskFZb-au-15" value="&lt;b&gt;6 Output Module&lt;/b&gt;" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#0050ef;fontColor=#ffffff;strokeColor=#001DBC;" vertex="1" parent="1">
          <mxGeometry x="471" y="1039" width="100.33" height="35" as="geometry" />
        </mxCell>
        <mxCell id="fAy4cRbwCINLskFZb-au-16" value="&lt;b&gt;7 Output Module&lt;/b&gt;" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#0050ef;fontColor=#ffffff;strokeColor=#001DBC;" vertex="1" parent="1">
          <mxGeometry x="481" y="1049" width="100.33" height="35" as="geometry" />
        </mxCell>
        <mxCell id="fAy4cRbwCINLskFZb-au-17" value="&lt;b&gt;8 Output Module&lt;/b&gt;" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#0050ef;fontColor=#ffffff;strokeColor=#001DBC;" vertex="1" parent="1">
          <mxGeometry x="494" y="1058" width="100.33" height="35" as="geometry" />
        </mxCell>
      </root>
    </mxGraphModel>
  </diagram>
  <diagram name="95-OutputModule" id="Wxlf60OAAQlv3tUu_XnG">
    <mxGraphModel dx="1160" dy="702" grid="0" gridSize="10" guides="1" tooltips="1" connect="1" arrows="1" fold="1" page="1" pageScale="1" pageWidth="850" pageHeight="1100" background="#000000" backgroundImage="{&quot;src&quot;:&quot;data:page/id,3tNNM1X5z_LQ3v7Zmcsf&quot;}" math="0" shadow="0">
      <root>
        <mxCell id="28KWs4VTUWVZ2b9I3IOr-0" />
        <mxCell id="28KWs4VTUWVZ2b9I3IOr-1" parent="28KWs4VTUWVZ2b9I3IOr-0" />
        <mxCell id="_crll0rlzgnrH9t6iCuD-0" value="&lt;div style=&quot;box-sizing: border-box; font-family: &amp;quot;Segoe UI VSS (Regular)&amp;quot;, &amp;quot;Segoe UI&amp;quot;, -apple-system, BlinkMacSystemFont, Roboto, &amp;quot;Helvetica Neue&amp;quot;, Helvetica, Ubuntu, Arial, sans-serif, &amp;quot;Apple Color Emoji&amp;quot;, &amp;quot;Segoe UI Emoji&amp;quot;, &amp;quot;Segoe UI Symbol&amp;quot;; font-size: 14px; text-align: start;&quot;&gt;Output modules connects to the gpio outputs, outputs are fixed and can be hard coded&lt;/div&gt;&lt;div style=&quot;box-sizing: border-box; font-family: &amp;quot;Segoe UI VSS (Regular)&amp;quot;, &amp;quot;Segoe UI&amp;quot;, -apple-system, BlinkMacSystemFont, Roboto, &amp;quot;Helvetica Neue&amp;quot;, Helvetica, Ubuntu, Arial, sans-serif, &amp;quot;Apple Color Emoji&amp;quot;, &amp;quot;Segoe UI Emoji&amp;quot;, &amp;quot;Segoe UI Symbol&amp;quot;; font-size: 14px; text-align: start;&quot;&gt;&lt;br style=&quot;box-sizing: border-box;&quot;&gt;&lt;b style=&quot;box-sizing: border-box;&quot;&gt;Input (32 bit)&lt;/b&gt;&lt;/div&gt;&lt;div style=&quot;box-sizing: border-box; font-family: &amp;quot;Segoe UI VSS (Regular)&amp;quot;, &amp;quot;Segoe UI&amp;quot;, -apple-system, BlinkMacSystemFont, Roboto, &amp;quot;Helvetica Neue&amp;quot;, Helvetica, Ubuntu, Arial, sans-serif, &amp;quot;Apple Color Emoji&amp;quot;, &amp;quot;Segoe UI Emoji&amp;quot;, &amp;quot;Segoe UI Symbol&amp;quot;; font-size: 14px; text-align: start;&quot;&gt;&lt;ol style=&quot;box-sizing: border-box; padding-left: 40px;&quot;&gt;&lt;li style=&quot;box-sizing: border-box; list-style: inherit;&quot;&gt;Control Bits (1byte)&lt;br style=&quot;box-sizing: border-box;&quot;&gt;&lt;span style=&quot;box-sizing: border-box;&quot;&gt;0-PWM enable (0-off, 1-on)&lt;br style=&quot;box-sizing: border-box;&quot;&gt;&lt;br style=&quot;box-sizing: border-box;&quot;&gt;&lt;/span&gt;Led control bits (4 bits, if extracting value is hard and consumes memory, the spare can be used)&lt;br style=&quot;box-sizing: border-box;&quot;&gt;&lt;span style=&quot;box-sizing: border-box;&quot;&gt;1-led 1 bit&lt;/span&gt;&lt;br style=&quot;box-sizing: border-box;&quot;&gt;&lt;span style=&quot;box-sizing: border-box;&quot;&gt;2-led 2 bit&lt;/span&gt;&lt;br style=&quot;box-sizing: border-box;&quot;&gt;&lt;span style=&quot;box-sizing: border-box;&quot;&gt;3-led 3 bit&lt;/span&gt;&lt;br style=&quot;box-sizing: border-box;&quot;&gt;&lt;span style=&quot;box-sizing: border-box;&quot;&gt;4-led 4 bit&lt;/span&gt;&lt;br style=&quot;box-sizing: border-box;&quot;&gt;&lt;span style=&quot;box-sizing: border-box;&quot;&gt;5-spare&lt;/span&gt;&lt;br style=&quot;box-sizing: border-box;&quot;&gt;&lt;span style=&quot;box-sizing: border-box;&quot;&gt;6-spare&lt;/span&gt;&lt;br style=&quot;box-sizing: border-box;&quot;&gt;&lt;span style=&quot;box-sizing: border-box;&quot;&gt;7-spare&lt;/span&gt;&lt;br style=&quot;box-sizing: border-box;&quot;&gt;&lt;/li&gt;&lt;li style=&quot;box-sizing: border-box; list-style: inherit;&quot;&gt;&lt;span style=&quot;box-sizing: border-box;&quot;&gt;Level 0-100 (1byte)&lt;/span&gt;&lt;/li&gt;&lt;li style=&quot;box-sizing: border-box; list-style: inherit;&quot;&gt;&lt;span style=&quot;box-sizing: border-box;&quot;&gt;Led brightness 0-100 (1byte)&lt;/span&gt;&lt;/li&gt;&lt;li style=&quot;box-sizing: border-box; list-style: inherit;&quot;&gt;&lt;span style=&quot;box-sizing: border-box;&quot;&gt;Spare&lt;/span&gt;&lt;/li&gt;&lt;/ol&gt;&lt;div style=&quot;box-sizing: border-box;&quot;&gt;&lt;div style=&quot;box-sizing: border-box;&quot;&gt;&lt;b style=&quot;box-sizing: border-box;&quot;&gt;Output&lt;/b&gt;&lt;/div&gt;&lt;div style=&quot;box-sizing: border-box;&quot;&gt;1- Control Output (Hardware Output, Fixed)&lt;/div&gt;&lt;div style=&quot;box-sizing: border-box;&quot;&gt;2- LED Output&amp;nbsp;&lt;span style=&quot;box-sizing: border-box;&quot;&gt;(Hardware Output, Fixed)&lt;/span&gt;&lt;/div&gt;&lt;div style=&quot;box-sizing: border-box;&quot;&gt;&lt;br style=&quot;box-sizing: border-box;&quot;&gt;&lt;/div&gt;&lt;/div&gt;&lt;div style=&quot;box-sizing: border-box;&quot;&gt;&lt;b style=&quot;box-sizing: border-box;&quot;&gt;Control Logic&lt;/b&gt;&lt;/div&gt;&lt;div style=&quot;box-sizing: border-box;&quot;&gt;&lt;br style=&quot;box-sizing: border-box;&quot;&gt;&lt;i style=&quot;box-sizing: border-box;&quot;&gt;&lt;u style=&quot;box-sizing: border-box;&quot;&gt;Control Output&lt;/u&gt;&lt;/i&gt;&lt;/div&gt;&lt;div style=&quot;box-sizing: border-box;&quot;&gt;&lt;ul style=&quot;box-sizing: border-box; padding: 0px 0px 0px 40px;&quot;&gt;&lt;li style=&quot;box-sizing: border-box; list-style: inherit;&quot;&gt;If PWM enable is high, enable PWM output, else low or high output&lt;/li&gt;&lt;li style=&quot;box-sizing: border-box; list-style: inherit;&quot;&gt;Start PWM when the output level changes from 0 to any&lt;/li&gt;&lt;li style=&quot;box-sizing: border-box; list-style: inherit;&quot;&gt;PWM must be triggered with respect to the zero crossing input (P1.05 on bmd)&lt;/li&gt;&lt;/ul&gt;&lt;div style=&quot;box-sizing: border-box;&quot;&gt;&lt;i style=&quot;box-sizing: border-box;&quot;&gt;&lt;u style=&quot;box-sizing: border-box;&quot;&gt;Led Output&lt;/u&gt;&lt;br style=&quot;box-sizing: border-box;&quot;&gt;&lt;br style=&quot;box-sizing: border-box;&quot;&gt;&lt;/i&gt;&lt;/div&gt;&lt;div style=&quot;box-sizing: border-box;&quot;&gt;Addressable leds are used, a driver light in size can be used, if calling led drivers on all 8 instances of output module increases memory a common module to control all led outputs can be considered)&lt;/div&gt;&lt;div style=&quot;box-sizing: border-box;&quot;&gt;&lt;ul style=&quot;box-sizing: border-box; padding: 0px 0px 0px 40px;&quot;&gt;&lt;li style=&quot;box-sizing: border-box; list-style: inherit;&quot;&gt;Check led enable bits&lt;/li&gt;&lt;li style=&quot;box-sizing: border-box; list-style: inherit;&quot;&gt;Set brightness&lt;br style=&quot;box-sizing: border-box;&quot;&gt;&lt;/li&gt;&lt;li style=&quot;box-sizing: border-box; list-style: inherit;&quot;&gt;Set color (LED color is set globally, fetched from global data block)&lt;/li&gt;&lt;li style=&quot;box-sizing: border-box; list-style: inherit;&quot;&gt;If level is not 0, turn on enabled leds (Same color and brightness for all leds)&lt;/li&gt;&lt;li style=&quot;box-sizing: border-box; list-style: inherit;&quot;&gt;If brightness is 0 or number of leds 0, disable execution to reduce power consumption&lt;br&gt;&lt;/li&gt;&lt;/ul&gt;&lt;/div&gt;&lt;/div&gt;&lt;/div&gt;" style="rounded=0;whiteSpace=wrap;html=1;fillColor=#99CCFF;strokeColor=#b85450;gradientColor=none;glass=1;opacity=89;shadow=0;" vertex="1" parent="28KWs4VTUWVZ2b9I3IOr-1">
          <mxGeometry x="7" y="4" width="838" height="1092" as="geometry" />
        </mxCell>
        <UserObject label="&lt;b&gt;&lt;font style=&quot;font-size: 21px;&quot;&gt;X&lt;/font&gt;&lt;/b&gt;" link="data:page/id,3tNNM1X5z_LQ3v7Zmcsf" id="VXUHg0nwCiEcjgxS4703-0">
          <mxCell style="whiteSpace=wrap;html=1;aspect=fixed;fillColor=#ff0000;" vertex="1" parent="28KWs4VTUWVZ2b9I3IOr-1">
            <mxGeometry x="812" y="4" width="33" height="33" as="geometry" />
          </mxCell>
        </UserObject>
      </root>
    </mxGraphModel>
  </diagram>
</mxfile>
